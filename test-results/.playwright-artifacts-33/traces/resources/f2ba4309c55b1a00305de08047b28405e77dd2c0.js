define(["exports","react","react-dom"],(function(e,t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=o(t),i=o(n);var a,s={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */a=s,function(){var e={}.hasOwnProperty;function t(){for(var n=[],o=0;o<arguments.length;o++){var r=arguments[o];if(r){var i=typeof r;if("string"===i||"number"===i)n.push(r);else if(Array.isArray(r)){if(r.length){var a=t.apply(null,r);a&&n.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){n.push(r.toString());continue}for(var s in r)e.call(r,s)&&r[s]&&n.push(s)}}}return n.join(" ")}a.exports?(t.default=t,a.exports=t):window.classNames=t}();var l=s.exports;function c(e,t){return"pixels"===t?e:"percentage"===t?e+"%":""}function u(e){return e?{onClick:e,role:"button",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e(t)}}:{}}const d=function(e){return t.createElement("div",{className:l("mx-image-viewer",{"mx-image-viewer-responsive":e.responsive},e.className,{hidden:!e.hasImage})},e.children)},f=function(e){return t.createElement("div",{className:l("mx-image-viewer","mx-image-background",e.className),onClick:e.onClick,style:{...e.style,height:c(e.height,e.heightUnit),width:c(e.width,e.widthUnit),backgroundImage:"url('".concat(e.image,"')")}},e.children)},p=function(e){const n=e.altText?{"aria-label":e.altText,role:"img"}:{},o=u(e.onClick);return t.createElement("span",{className:l(e.icon,{glyphicon:e.isGlyph}),style:{...e.style,fontSize:"".concat(e.size,"px")},...n,...o})},m=function(e){const n=u(e.onClick);return t.createElement("img",{className:e.className,src:e.image,style:{...e.style,height:c(e.height,e.heightUnit),width:c(e.width,e.widthUnit)},alt:e.altText,...n})};function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}function g(e){return e&&e.ownerDocument||document}function v(e){void 0===e&&(e=g());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(t){return e.body}}function y(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var b=!("undefined"==typeof window||!window.document||!window.document.createElement),x=!1,w=!1;try{var E={get passive(){return x=!0},get once(){return w=x=!0}};b&&(window.addEventListener("test",E,E),window.removeEventListener("test",E,!0))}catch(e){}function k(e,t,n,o){return function(e,t,n,o){if(o&&"boolean"!=typeof o&&!w){var r=o.once,i=o.capture,a=n;!w&&r&&(a=n.__once||function e(o){this.removeEventListener(t,e,i),n.call(this,o)},n.__once=a),e.addEventListener(t,a,x?o:i)}e.addEventListener(t,n,o)}(e,t,n,o),function(){!function(e,t,n,o){var r=o&&"boolean"!=typeof o?o.capture:o;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}(e,t,n,o)}}var C,O,N,T,S={exports:{}};function R(e){var n,o,r=(n=e,(o=t.useRef(n)).current=n,o);t.useEffect((function(){return function(){return r.current()}}),[])}function I(e){var n=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n}(e);return t.useCallback((function(){return n.current&&n.current.apply(n,arguments)}),[n])}function L(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function P(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function U(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=P(e.className,t):e.setAttribute("class",P(e.className&&e.className.baseVal||"",t))}function _(e,t){return function(e){var t=g(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}S.exports=function(){if(T)return N;T=1;var e=O?C:(O=1,C="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,N=function(){function o(t,n,o,r,i,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function r(){return o}o.isRequired=o;var i={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:r,element:o,elementType:o,instanceOf:r,node:o,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}()();var F=/([A-Z])/g;var D=/^ms-/;function j(e){return function(e){return e.replace(F,"-$1").toLowerCase()}(e).replace(D,"-ms-")}var A,B=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function M(e,t){var n="",o="";if("string"==typeof t)return e.style.getPropertyValue(j(t))||_(e).getPropertyValue(j(t));Object.keys(t).forEach((function(r){var i=t[r];i||0===i?!function(e){return!(!e||!B.test(e))}(r)?n+=j(r)+": "+i+";":o+=r+"("+i+") ":e.style.removeProperty(j(r))})),o&&(n+="transform: "+o+";"),e.style.cssText+=";"+n}function z(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function V(e){var t;return z(e)||(t=e)&&"body"===t.tagName.toLowerCase()?function(e){var t=z(e)?g():g(e),n=z(e)||t.defaultView;return t.body.clientWidth<n.innerWidth}(e):e.scrollHeight>e.clientHeight}var H=["template","script","style"],W=function(e,t,n){[].forEach.call(e.children,(function(e){var o,r,i;-1===t.indexOf(e)&&(r=(o=e).nodeType,i=o.tagName,1===r&&-1===H.indexOf(i.toLowerCase()))&&n(e)}))};function $(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}var K,Y=function(){function e(e){var t=void 0===e?{}:e,n=t.hideSiblingNodes,o=void 0===n||n,r=t.handleContainerOverflow,i=void 0===r||r;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=o,this.handleContainerOverflow=i,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=function(e){if((!A&&0!==A||e)&&b){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),A=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return A}()}var t=e.prototype;return t.isContainerOverflowing=function(e){var t=this.data[this.containerIndexFromModal(e)];return t&&t.overflowing},t.containerIndexFromModal=function(e){return t=this.data,n=function(t){return-1!==t.modals.indexOf(e)},o=-1,t.some((function(e,t){return!!n(e,t)&&(o=t,!0)})),o;var t,n,o},t.setContainerStyle=function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt(M(t,"paddingRight")||"0",10)+this.scrollbarSize+"px"),M(t,n)},t.removeContainerStyle=function(e,t){Object.assign(t.style,e.style)},t.add=function(e,t,n){var o=this.modals.indexOf(e),r=this.containers.indexOf(t);if(-1!==o)return o;if(o=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&function(e,t){var n=t.dialog,o=t.backdrop;W(e,[n,o],(function(e){return $(!0,e)}))}(t,e),-1!==r)return this.data[r].modals.push(e),o;var i={modals:[e],classes:n?n.split(/\s+/):[],overflowing:V(t)};return this.handleContainerOverflow&&this.setContainerStyle(i,t),i.classes.forEach(L.bind(null,t)),this.containers.push(t),this.data.push(i),o},t.remove=function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=this.containerIndexFromModal(e),o=this.data[n],r=this.containers[n];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(t,1),0===o.modals.length)o.classes.forEach(U.bind(null,r)),this.handleContainerOverflow&&this.removeContainerStyle(o,r),this.hideSiblingNodes&&function(e,t){var n=t.dialog,o=t.backdrop;W(e,[n,o],(function(e){return $(!1,e)}))}(r,e),this.containers.splice(n,1),this.data.splice(n,1);else if(this.hideSiblingNodes){var i=o.modals[o.modals.length-1],a=i.backdrop;$(!1,i.dialog),$(!1,a)}}},t.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}(),G=function(e){var t;return"undefined"==typeof document?null:null==e?g().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function X(e){var n=e||(K||(K=new Y),K),o=t.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:function(e,t){return n.add(o.current,e,t)},remove:function(){return n.remove(o.current)},isTopModal:function(){return n.isTopModal(o.current)},setDialogRef:t.useCallback((function(e){o.current.dialog=e}),[]),setBackdropRef:t.useCallback((function(e){o.current.backdrop=e}),[])})}var Z=t.forwardRef((function(e,n){var o=e.show,a=void 0!==o&&o,s=e.role,l=void 0===s?"dialog":s,c=e.className,u=e.style,d=e.children,f=e.backdrop,p=void 0===f||f,m=e.keyboard,g=void 0===m||m,x=e.onBackdropClick,w=e.onEscapeKeyDown,E=e.transition,C=e.backdropTransition,O=e.autoFocus,N=void 0===O||O,T=e.enforceFocus,S=void 0===T||T,L=e.restoreFocus,P=void 0===L||L,U=e.restoreFocusOptions,_=e.renderDialog,F=e.renderBackdrop,D=void 0===F?function(e){return r.default.createElement("div",e)}:F,j=e.manager,A=e.container,B=e.containerClassName,M=e.onShow,z=e.onHide,V=void 0===z?function(){}:z,H=e.onExit,W=e.onExited,$=e.onExiting,K=e.onEnter,Y=e.onEntering,Z=e.onEntered,q=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),J=function(e,n){var o=t.useState((function(){return G(e)})),r=o[0],i=o[1];if(!r){var a=G(e);a&&i(a)}return t.useEffect((function(){n&&r&&n(r)}),[n,r]),t.useEffect((function(){var t=G(e);t!==r&&i(t)}),[e,r]),r}(A),Q=X(j),ee=function(){var e=t.useRef(!0),n=t.useRef((function(){return e.current}));return t.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}(),te=function(e){var n=t.useRef(null);return t.useEffect((function(){n.current=e})),n.current}(a),ne=t.useState(!a),oe=ne[0],re=ne[1],ie=t.useRef(null);t.useImperativeHandle(n,(function(){return Q}),[Q]),b&&!te&&a&&(ie.current=v()),E||a||oe?a&&oe&&re(!1):re(!0);var ae=I((function(){if(Q.add(J,B),fe.current=k(document,"keydown",ue),de.current=k(document,"focus",(function(){return setTimeout(le)}),!0),M&&M(),N){var e=v(document);Q.dialog&&e&&!y(Q.dialog,e)&&(ie.current=e,Q.dialog.focus())}})),se=I((function(){var e;(Q.remove(),null==fe.current||fe.current(),null==de.current||de.current(),P)&&(null==(e=ie.current)||null==e.focus||e.focus(U),ie.current=null)}));t.useEffect((function(){a&&J&&ae()}),[a,J,ae]),t.useEffect((function(){oe&&se()}),[oe,se]),R((function(){se()}));var le=I((function(){if(S&&ee()&&Q.isTopModal()){var e=v();Q.dialog&&e&&!y(Q.dialog,e)&&Q.dialog.focus()}})),ce=I((function(e){e.target===e.currentTarget&&(null==x||x(e),!0===p&&V())})),ue=I((function(e){g&&27===e.keyCode&&Q.isTopModal()&&(null==w||w(e),e.defaultPrevented||V())})),de=t.useRef(),fe=t.useRef(),pe=E;if(!J||!(a||pe&&!oe))return null;var me=h({role:l,ref:Q.setDialogRef,"aria-modal":"dialog"===l||void 0},q,{style:u,className:c,tabIndex:-1}),he=_?_(me):r.default.createElement("div",me,r.default.cloneElement(d,{role:"document"}));pe&&(he=r.default.createElement(pe,{appear:!0,unmountOnExit:!0,in:!!a,onExit:H,onExiting:$,onExited:function(){re(!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==W||W.apply(void 0,t)},onEnter:K,onEntering:Y,onEntered:Z},he));var ge=null;if(p){var ve=C;ge=D({ref:Q.setBackdropRef,onClick:ce}),ve&&(ge=r.default.createElement(ve,{appear:!0,in:!!a},ge))}return r.default.createElement(r.default.Fragment,null,i.default.createPortal(r.default.createElement(r.default.Fragment,null,ge,he),J))})),q={show:S.exports.bool,container:S.exports.any,onShow:S.exports.func,onHide:S.exports.func,backdrop:S.exports.oneOfType([S.exports.bool,S.exports.oneOf(["static"])]),renderDialog:S.exports.func,renderBackdrop:S.exports.func,onEscapeKeyDown:S.exports.func,onBackdropClick:S.exports.func,containerClassName:S.exports.string,keyboard:S.exports.bool,transition:S.exports.elementType,backdropTransition:S.exports.elementType,autoFocus:S.exports.bool,enforceFocus:S.exports.bool,restoreFocus:S.exports.bool,restoreFocusOptions:S.exports.shape({preventScroll:S.exports.bool}),onEnter:S.exports.func,onEntering:S.exports.func,onEntered:S.exports.func,onExit:S.exports.func,onExiting:S.exports.func,onExited:S.exports.func,manager:S.exports.instanceOf(Y)};Z.displayName="Modal",Z.propTypes=q;var J=Object.assign(Z,{Manager:Y}),Q="widgets/com/mendix/widget/web/image/assets/c021d926c33ac67c.svg";function ee(e){let{onClose:n,...o}=e;return t.createElement("div",{className:"mx-image-viewer-lightbox-backdrop",...o},t.createElement("button",{className:l("btn btn-image btn-icon close-button"),onClick:n},t.createElement("img",{src:Q,className:"removeIcon",alt:"Close icon for the full screen image lightbox"})))}function te(e){let{isOpen:n,onClose:o,children:r}=e;const i=t.useCallback((e=>t.createElement(ee,{onClose:o,...e})),[o]),a=t.useCallback((e=>{e.stopPropagation()}),[]);return t.createElement(J,{show:n,onHide:o,renderBackdrop:i,onBackdropClick:a,className:"mx-image-viewer-lightbox"},t.createElement("div",null,r))}function ne(e,t){if(!e||"fullImage"===t)return e;const n=new URL(e);return n.searchParams.append("thumb","true"),n.href}const oe=e=>{let{class:n,style:o,widthUnit:r,width:i,heightUnit:a,height:s,iconSize:c,responsive:u,onClickType:h,onClick:g,type:v,image:y,altText:b,displayAs:x,previewMode:w,renderAsBackground:E,backgroundImageContent:k}=e;const{lightboxIsOpen:C,openLightbox:O,closeLightbox:N}=(()=>{const[e,n]=t.useState(!1);return{lightboxIsOpen:e,openLightbox:t.useCallback((()=>{n(!0)}),[]),closeLightbox:t.useCallback((()=>{n(!1)}),[])}})(),T=t.useCallback((e=>{null==e||e.stopPropagation(),N()}),[N]),S=t.useCallback((e=>{e.stopPropagation(),"action"===h?null==g||g():"enlarge"===h&&O()}),[g,h,O]),R={style:o,onClick:"action"===h&&g||"enlarge"===h?S:void 0,altText:b},I="image"===v?t.createElement(m,{className:l({"img-thumbnail":"thumbnail"===x}),image:w?y:ne(y,x),height:s,heightUnit:a,width:i,widthUnit:r,...R}):t.createElement(p,{icon:y,isGlyph:"glyph"===v,size:c,...R});return E?t.createElement(f,{className:n,style:o,image:y,height:s,heightUnit:a,width:i,widthUnit:r,onClick:e=>{e.stopPropagation(),null==g||g()}},k):t.createElement(d,{className:n,responsive:u,hasImage:void 0!==y&&y.length>0},I,!w&&C&&t.createElement(te,{isOpen:C,onClose:T},"image"===v?t.cloneElement(I,{image:y,onClick:void 0}):I))};e.Image=e=>{var n;const o=t.useCallback((()=>{var t;return null===(t=e.onClick)||void 0===t?void 0:t.execute()}),[e.onClick]),{type:r,image:i}=function(e){let{datasource:t,imageIcon:n,imageObject:o,imageUrl:r,defaultImageDynamic:i}=e;const a={type:"image",image:void 0};switch(t){case"image":return"available"===(null==o?void 0:o.status)?{type:"image",image:o.value.uri}:"unavailable"===(null==o?void 0:o.status)&&"available"===(null==i?void 0:i.status)?{type:"image",image:i.value.uri}:{type:"image",image:void 0};case"imageUrl":return{type:"image",image:"available"===(null==r?void 0:r.status)?r.value:void 0};case"icon":if("available"===(null==n?void 0:n.status)&&n.value){const e=n.value;return{type:e.type,image:"image"===e.type?e.iconUrl:e.iconClass}}return a;default:return a}}(e),a="available"===(null===(n=e.alternativeText)||void 0===n?void 0:n.status)?e.alternativeText.value:void 0;return t.createElement(oe,{class:e.class,style:e.style,widthUnit:e.widthUnit,width:e.width,heightUnit:e.heightUnit,height:e.height,iconSize:e.iconSize,responsive:e.responsive,onClickType:e.onClickType,onClick:e.onClick?o:void 0,type:r,image:i,altText:a,displayAs:e.displayAs,renderAsBackground:"icon"!==e.datasource&&e.isBackgroundImage,backgroundImageContent:e.children})},Object.defineProperty(e,"__esModule",{value:!0})}));
